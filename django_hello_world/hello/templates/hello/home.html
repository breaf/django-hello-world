{% extends "base.html" %}


{% block extrahead %}
    {{ block.super }}
    <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}admin/css/base.css"/>
    <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}admin/css/widgets.css"/>

    <script type="text/javascript" src="/admin/jsi18n/"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}admin/js/core.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}admin/js/calendar.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}admin/js/jquery.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}admin/js/jquery.init.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}admin/js/admin/DateTimeShortcuts.js"></script>
    <script type="text/javascript">window.__admin_media_prefix__ = "/static/admin/";</script>

    <script src="{{ STATIC_URL }}js/jquery-1.9.1.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}js/jquery.form.js" type="text/javascript"></script>
    <script>
        $(document).ready(function() {
            var progress_bar = $("#progress_bar");
            $('#contact_form').ajaxForm({
                beforeSubmit: function () { showProgress() },
                success: function(){ hideProgress() },
                uploadProgress: function(event, position, total, percentComplete) {
                    var percentVal = percentComplete + '%';
                    progress_bar.width(percentVal);
                }
            });
            function showProgress() {
                $('input, textarea').attr('disabled', 'disabled');
            }
            function hideProgress() {
                $('input, textarea').removeAttr('disabled');
                progress_bar.width(0);
            }
        });
    </script>
{% endblock %}

{% block content %}
    <h3>42 Coffee Cups Test Assignment</h3>

    <div class="contacts">
        <div class="blocks">
            <p>{{ user.first_name }}</p>
            <p>{{ user.last_name }}</p>
            <p>{{ user.userprofile.date_of_birth }}</p>
            {% if user.userprofile.photo %}
                <img id="avatar" src="{{ user.userprofile.photo.url }}" width="294" height="400" border="2">
            {% endif %}
        </div>
        <div class="blocks">
            <p>Contacts</p>
            <p>Email: {{ user.email }}</p>
            <p>Jabber: {{ user.userprofile.jabber }}</p>
            <p>Skype: {{ user.userprofile.skype }}</p>
            <p>
                Other contacts:<br>
                {{ user.userprofile.contacts }}
            </p>
            <p>
                Bio:<br>
                {{ user.userprofile.bio }}
            </p>
        </div>
        <div class="blocks">
            {% if request.user.is_authenticated %}
                <a href="{% url edit_contacts %}">Edit</a>
            {% else %}
                <a href="{% url admin:index %}">Login</a>
            {% endif %}
        </div>
    </div>

    <div class="separator">
        <hr>
    </div>

    <p><a href="{% url requests_list %}">requests</a></p>
    <p>settings.DEBUG: {{ settings.DEBUG }}</p>

    <div>
        <p>You can now go to <a href="{% url admin:index %}">admin interface</a> and change admin pasword</p>
        <p>Currently next users are registered: {% for user in users %}{{ user.username }} {% endfor %}</p>
    </div>
{% endblock content %}
